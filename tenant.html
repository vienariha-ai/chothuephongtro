<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Tài khoản phòng – YT Home</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --primary: #2563eb;
      --bg: #0b1120;
    }

    * { box-sizing:border-box; margin:0; padding:0; }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background:
        radial-gradient(circle at top left, rgba(56,189,248,0.2), transparent 50%),
        radial-gradient(circle at top right, rgba(129,140,248,0.2), transparent 55%),
        radial-gradient(circle at bottom, rgba(45,212,191,0.25), transparent 55%),
        var(--bg);
      color:#e5e7eb;
      min-height:100vh;
    }

    a { color:inherit; text-decoration:none; }

    .container { max-width:960px; margin:0 auto; padding:16px; }

    header {
      border-bottom:1px solid rgba(148,163,184,0.5);
      margin-bottom:16px;
      padding-bottom:8px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
      flex-wrap:wrap;
    }

    .logo {
      display:flex;
      align-items:center;
      gap:10px;
      font-weight:700;
      letter-spacing:0.08em;
      text-transform:uppercase;
    }

    .logo-icon {
      width:32px; height:32px;
      border-radius:999px;
      background:conic-gradient(from 120deg,#38bdf8,#22c55e,#6366f1,#38bdf8);
      display:flex; align-items:center; justify-content:center;
      color:#0b1120; font-size:0.9rem; font-weight:800;
    }

    .btn {
      border-radius:999px;
      padding:8px 16px;
      font-size:0.85rem;
      font-weight:600;
      border:none;
      cursor:pointer;
      background:radial-gradient(circle at top left,#38bdf8,#2563eb);
      color:#f9fafb;
      box-shadow:0 10px 25px rgba(37,99,235,0.5);
      transition:transform .18s, box-shadow .18s, filter .18s;
    }
    .btn:hover{transform:translateY(-2px);box-shadow:0 16px 40px rgba(37,99,235,0.8);filter:brightness(1.05);}
    .btn-outline{background:transparent;border:1px solid rgba(148,163,184,0.8);box-shadow:none;}
    .btn-outline:hover{background:rgba(15,23,42,0.9);}

    .card {
      background:radial-gradient(circle at top,rgba(15,23,42,0.98),rgba(15,23,42,1));
      border-radius:18px;
      border:1px solid rgba(148,163,184,0.7);
      box-shadow:0 18px 46px rgba(15,23,42,0.96);
      padding:16px;
      font-size:0.9rem;
    }

    .section-title{font-size:1.05rem;font-weight:600;margin-bottom:8px;}

    .form-group{margin-bottom:8px;font-size:0.85rem;}
    .form-group label{display:block;margin-bottom:2px;font-weight:600;}
    .form-control{
      width:100%;padding:6px 8px;border-radius:10px;
      border:1px solid rgba(148,163,184,0.8);background:rgba(15,23,42,0.96);
      color:#e5e7eb;font-size:0.85rem;outline:none;
    }
    .form-control:focus{border-color:#38bdf8;}
    textarea.form-control{min-height:80px;resize:vertical;}

    .tenant-card p{font-size:0.85rem;color:rgba(209,213,219,0.98);}
    .tenant-header{
      display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;
      gap:8px;margin:6px 0 8px;
    }
    .tenant-header-main{display:flex;flex-wrap:wrap;align-items:center;gap:8px;}
    .tenant-welcome{font-size:0.88rem;color:rgba(226,232,240,0.98);}
    .tenant-welcome strong{color:#f9fafb;}

    .tenant-tabs{
      display:flex;flex-wrap:wrap;gap:6px;
    }
    .tenant-tab{
      font-size:0.8rem;padding:6px 13px;border-radius:999px;
      border:1px solid rgba(148,163,184,0.7);
      background:rgba(15,23,42,0.96);
      color:rgba(226,232,240,0.96);
      cursor:pointer;transition:all .16s;
    }
    .tenant-tab:hover{
      border-color:#38bdf8;
      background:radial-gradient(circle at top,rgba(56,189,248,0.22),rgba(15,23,42,0.99));
      box-shadow:0 10px 24px rgba(15,23,42,0.95);
    }
    .tenant-tab.active{
      border-color:#38bdf8;
      background:linear-gradient(120deg,rgba(56,189,248,0.28),rgba(15,23,42,0.98));
      color:#e0f2fe;
      box-shadow:0 12px 30px rgba(15,23,42,0.98);
    }

    .tenant-panel{display:none;margin-top:6px;}
    .tenant-panel.active{display:block;}

    .tenant-status-text{font-size:0.8rem;color:rgba(148,163,184,0.96);margin-bottom:4px;}

    .tenant-table{width:100%;border-collapse:collapse;font-size:0.8rem;}
    .tenant-table th,.tenant-table td{
      padding:4px 6px;
      border-bottom:1px solid rgba(51,65,85,0.9);
      text-align:left;
    }
    .tenant-table th{font-weight:600;color:rgba(226,232,240,0.98);}
    .tenant-table td{color:rgba(203,213,225,0.98);}

    .tenant-history-list{margin-top:4px;display:flex;flex-direction:column;gap:6px;font-size:0.8rem;}
    .tenant-history-item{
      padding:6px 8px;border-radius:10px;
      border:1px solid rgba(51,65,85,0.9);background:rgba(15,23,42,0.96);
    }

    .tenant-badge{
      display:inline-flex;align-items:center;
      padding:2px 6px;border-radius:999px;
      border:1px solid rgba(148,163,184,0.8);
      font-size:0.7rem;margin-right:4px;
    }

    .tenant-form-note{font-size:0.78rem;color:rgba(148,163,184,0.96);margin-top:4px;}

    #tenantLoginStatus,#maintenanceStatus,#tempStayStatus{
      margin-top:4px;font-size:0.8rem;color:rgba(148,163,184,0.96);min-height:16px;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">
        <div class="logo-icon">YT</div>
        <div>
          <div>YT Home</div>
          <div style="font-size:0.7rem;font-weight:500;color:rgba(148,163,184,0.9);">
            Tài khoản phòng
          </div>
        </div>
      </div>
      <button class="btn btn-outline" onclick="window.location.href='index.html'">
        ← Về danh sách phòng
      </button>
    </header>

    <main>
      <div class="card tenant-card">
        <div class="section-title">Tài khoản phòng</div>

        <!-- Chưa đăng nhập -->
        <div id="tenantLoginBox">
          <p id="tenantLoginHint">
            Mục này dành cho cư dân đang thuê phòng. Vui lòng đăng nhập bằng
            <strong>Mã phòng</strong> và
            <strong>Số điện thoại hoặc Số CCCD/CMND của chủ phòng</strong>
            theo Hợp đồng hiệu lực.
          </p>
          <form id="tenantLoginForm">
            <div class="form-group">
              <label for="tenantLoginRoomCode">Mã phòng</label>
              <input
                id="tenantLoginRoomCode"
                class="form-control"
                type="text"
                placeholder="Ví dụ: P303, 301, 4A..."
                required
              />
            </div>
            <div class="form-group">
              <label for="tenantLoginIdentity">Số điện thoại hoặc Số CCCD/CMND của chủ phòng</label>
              <input
                id="tenantLoginIdentity"
                class="form-control"
                type="text"
                placeholder="Nhập Số điện thoại hoặc Số CCCD/CMND"
                required
              />
            </div>
            <button type="submit" class="btn" style="width:100%;">Đăng nhập tài khoản phòng</button>
            <p id="tenantLoginStatus"></p>
          </form>
        </div>

        <!-- Đã đăng nhập -->
        <div id="tenantPortal" style="display:none;">
          <div class="tenant-header">
            <div class="tenant-header-main">
              <div class="tenant-welcome">
                Xin chào <strong id="tenantWelcomeName"></strong> · Phòng
                <span id="tenantWelcomeRoom"></span>
              </div>
              <button type="button"
                      class="btn btn-outline"
                      style="padding:4px 10px;font-size:0.78rem;"
                      onclick="logoutTenant()">
                Đăng xuất
              </button>
            </div>
            <div class="tenant-tabs">
              <button class="tenant-tab active" data-tab="tenantBills">Hóa đơn & thanh toán</button>
              <button class="tenant-tab" data-tab="tenantMaintenance">Báo hỏng / sửa chữa</button>
              <button class="tenant-tab" data-tab="tenantTempStay">Đăng ký tạm trú</button>
              <button class="tenant-tab" data-tab="tenantHistory">Yêu cầu đã gửi</button>
            </div>
          </div>

          <div class="tenant-tab-panels">
            <!-- Hóa đơn -->
            <div id="tenantBills" class="tenant-panel active">
              <div id="tenantBillsStatus" class="tenant-status-text">Đang tải hóa đơn...</div>
              <table class="tenant-table" id="tenantBillsTable">
                <thead>
                  <tr>
                    <th>Tháng</th>
                    <th>Tổng tiền</th>
                    <th>Trạng thái</th>
                    <th>Hạn thanh toán</th>
                    <th>Chi tiết</th>
                  </tr>
                </thead>
                <tbody></tbody>
              </table>
            </div>

            <!-- Báo hỏng -->
            <div id="tenantMaintenance" class="tenant-panel">
              <form id="maintenanceForm">
                <div class="form-group">
                  <label for="maintenanceCategory">Hạng mục hư hỏng</label>
                  <select id="maintenanceCategory" class="form-control" required>
                    <option value="">-- Chọn hạng mục --</option>
                    <option>Điện</option>
                    <option>Nước</option>
                    <option>Nội thất (giường, tủ...)</option>
                    <option>Thiết bị (máy lạnh, máy nước nóng...)</option>
                    <option>Khác</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="maintenanceDesc">Mô tả chi tiết</label>
                  <textarea id="maintenanceDesc"
                            class="form-control"
                            required
                            placeholder="Ví dụ: Vòi nước trong nhà tắm bị rò, chảy liên tục từ tối qua..."></textarea>
                </div>
                <div class="form-group">
                  <label for="maintenanceTime">Thời gian thuận tiện để kiểm tra (dự kiến)</label>
                  <input
                    id="maintenanceTime"
                    class="form-control"
                    type="text"
                    placeholder="Ví dụ: Sau 18h các ngày trong tuần hoặc sáng Chủ Nhật"
                  />
                </div>
                <button type="submit" class="btn" style="width:100%;">Gửi yêu cầu sửa chữa</button>
                <p id="maintenanceStatus"></p>
                <p class="tenant-form-note">
                  Yêu cầu của bạn sẽ được ghi nhận trên hệ thống. Quản lý sẽ liên hệ lại để xác nhận thời gian sửa chữa.
                </p>
              </form>
            </div>

            <!-- Đăng ký tạm trú -->
            <div id="tenantTempStay" class="tenant-panel">
              <form id="tempStayForm">
                <div class="form-group">
                  <label for="tempGuestName">Họ tên người tạm trú</label>
                  <input id="tempGuestName" class="form-control" type="text" required />
                </div>
                <div class="form-group">
                  <label for="tempGuestId">Số CCCD/CMND</label>
                  <input id="tempGuestId" class="form-control" type="text" required />
                </div>
                <div class="form-group">
                  <label for="tempStayFrom">Thời gian tạm trú</label>
                  <input
                    id="tempStayFrom"
                    class="form-control"
                    type="text"
                    placeholder="Ví dụ: từ 10/12/2025 đến 15/12/2025"
                    required
                  />
                </div>
                <div class="form-group">
                  <label for="tempStayNote">Ghi chú thêm (nếu có)</label>
                  <textarea
                    id="tempStayNote"
                    class="form-control"
                    placeholder="Ví dụ: Người thân ở quê lên khám bệnh..."
                  ></textarea>
                </div>
                <button type="submit" class="btn" style="width:100%;">Gửi đăng ký tạm trú</button>
                <p id="tempStayStatus"></p>
                <p class="tenant-form-note">
                  YT Home sẽ dùng thông tin này để hỗ trợ khai báo tạm trú/tạm vắng theo quy định địa phương.
                </p>
              </form>
            </div>

            <!-- Lịch sử yêu cầu -->
            <div id="tenantHistory" class="tenant-panel">
              <div id="tenantHistoryStatus" class="tenant-status-text">Đang tải dữ liệu...</div>
              <div id="tenantHistoryList" class="tenant-history-list"></div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script>
    const API_URL =
      "https://script.google.com/macros/s/AKfycbwyqskjnUjwkn95TqRmcFjLem2eSMfKBuh23PHDD0QcL0gCwEnqNLYxd6vmi7xqDzUoow/exec";

    const TENANT_STORAGE_KEY = "ytHomeTenant";
    let CURRENT_TENANT = null;

    function getQueryParam(name) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(name);
    }

    function loadTenantFromStorage() {
      try {
        const raw = localStorage.getItem(TENANT_STORAGE_KEY);
        CURRENT_TENANT = raw ? JSON.parse(raw) : null;
      } catch (e) {
        CURRENT_TENANT = null;
      }
    }

    function saveTenantToStorage() {
      try {
        if (CURRENT_TENANT) {
          localStorage.setItem(TENANT_STORAGE_KEY, JSON.stringify(CURRENT_TENANT));
        } else {
          localStorage.removeItem(TENANT_STORAGE_KEY);
        }
      } catch (e) {
        console.error("saveTenantToStorage error:", e);
      }
    }

    function logoutTenant() {
      CURRENT_TENANT = null;
      saveTenantToStorage();
      updateTenantUI();
      alert("Đã đăng xuất tài khoản phòng.");
    }

    function updateTenantUI() {
      const loginBox = document.getElementById("tenantLoginBox");
      const portal   = document.getElementById("tenantPortal");
      const nameEl   = document.getElementById("tenantWelcomeName");
      const roomEl   = document.getElementById("tenantWelcomeRoom");
      const roomInput= document.getElementById("tenantLoginRoomCode");

      if (!loginBox || !portal) return;

      if (CURRENT_TENANT && CURRENT_TENANT.roomCode) {
        loginBox.style.display = "none";
        portal.style.display   = "block";
        if (nameEl) nameEl.textContent =
          CURRENT_TENANT.tenantName ||
          CURRENT_TENANT.tenNguoiThue ||
          "Cư dân";
        if (roomEl) roomEl.textContent =
          CURRENT_TENANT.roomCode || CURRENT_TENANT.maPhong || "";
        loadTenantDashboard();
      } else {
        loginBox.style.display = "block";
        portal.style.display   = "none";

        // Prefill mã phòng từ query ?room=
        const roomParam = getQueryParam("room");
        if (roomInput && roomParam) roomInput.value = roomParam;
      }
    }

    function initTenantTabs() {
      const tabs   = document.querySelectorAll(".tenant-tab");
      const panels = document.querySelectorAll(".tenant-panel");
      tabs.forEach((tab) => {
        tab.addEventListener("click", () => {
          const target = tab.dataset.tab;
          tabs.forEach(t => t.classList.remove("active"));
          panels.forEach(p => p.classList.remove("active"));
          tab.classList.add("active");
          const panel = document.getElementById(target);
          if (panel) panel.classList.add("active");
        });
      });
    }

    async function handleTenantLogin(event) {
      event.preventDefault();
      const roomCode = document.getElementById("tenantLoginRoomCode").value.trim();
      const identity = document.getElementById("tenantLoginIdentity").value.trim();
      const statusEl = document.getElementById("tenantLoginStatus");

      if (!roomCode || !identity) {
        if (statusEl) {
          statusEl.textContent =
            "Vui lòng nhập đủ Mã phòng và Số điện thoại hoặc Số CCCD/CMND của chủ phòng.";
        }
        return;
      }

      if (statusEl) statusEl.textContent = "Đang kiểm tra thông tin đăng nhập...";

      try {
        const body = new URLSearchParams({
          action: "tenantLogin",
          roomCode,
          identity
        });

        const res  = await fetch(API_URL, {
          method: "POST",
          headers: {
            "Content-Type": "application/x-www-form-urlencoded;charset=UTF-8"
          },
          body
        });

        const data = await res.json();
        if (!data || !data.success) {
          if (statusEl) {
            statusEl.textContent =
              (data && data.message) ||
              "Không tìm thấy Hợp đồng hiệu lực hoặc Số điện thoại/CCCD của chủ phòng không khớp.";
          }
          return;
        }

        CURRENT_TENANT = {
          roomCode:   data.roomCode   || roomCode,
          tenantName: data.tenantName || data.tenNguoiThue || "",
          maPhong:    data.maPhong    || roomCode
        };
        saveTenantToStorage();
        if (statusEl) statusEl.textContent = "Đăng nhập thành công.";
        updateTenantUI();
      } catch (e) {
        console.error("handleTenantLogin error:", e);
        if (statusEl) statusEl.textContent = "Có lỗi khi đăng nhập. Vui lòng thử lại sau.";
      }
    }

    function formatVND(amount) {
      if (amount === null || amount === undefined || amount === "") return "--";
      const num = Number(String(amount).replace(/[^\d.-]/g, ""));
      if (isNaN(num)) return String(amount);
      return num.toLocaleString("vi-VN") + " đ";
    }

    function renderTenantBills(invoices) {
      const tbody    = document.querySelector("#tenantBillsTable tbody");
      const statusEl = document.getElementById("tenantBillsStatus");
      if (!tbody) return;
      tbody.innerHTML = "";

      if (!invoices || !invoices.length) {
        if (statusEl) statusEl.textContent = "Chưa có hóa đơn trên hệ thống.";
        return;
      }

      if (statusEl) statusEl.textContent = "Có " + invoices.length + " hóa đơn.";

      invoices.forEach((inv) => {
        const tr = document.createElement("tr");
        const monthText =
          inv.monthYear ||
          inv.thangNam ||
          (inv.month && inv.year ? inv.month + "/" + inv.year : "");
        const totalText  = formatVND(inv.total || inv.tongTien || inv.tienThanhToan || 0);
        const statusText = inv.status || inv.trangThai || inv.tinhTrang || "";
        const dueText    = inv.dueDate || inv.hanThanhToan || "";

        const detailLink = inv.detailUrl || inv.link || "";
        const detailHtml = detailLink
          ? `<a href="${detailLink}" target="_blank" rel="noopener noreferrer">Xem</a>`
          : "";

        tr.innerHTML = `
          <td>${monthText || ""}</td>
          <td>${totalText}</td>
          <td>${statusText}</td>
          <td>${dueText}</td>
          <td>${detailHtml}</td>
        `;
        tbody.appendChild(tr);
      });
    }

    function renderTenantHistory(items) {
      const list     = document.getElementById("tenantHistoryList");
      const statusEl = document.getElementById("tenantHistoryStatus");
      if (!list) return;
      list.innerHTML = "";

      if (!items || !items.length) {
        if (statusEl) statusEl.textContent = "Chưa có yêu cầu nào được ghi nhận.";
        return;
      }

      if (statusEl) statusEl.textContent = "Tổng " + items.length + " yêu cầu.";

      items.forEach((it) => {
        const div = document.createElement("div");
        div.className = "tenant-history-item";

        const typeText    = it.type || it.loai || "";
        const dateText    = it.createdAt || it.ngay || "";
        const statusText  = it.status || it.trangThai || "";
        const contentText = it.content || it.noiDung || it.moTa || "";

        div.innerHTML = `
          <div style="margin-bottom:2px;">
            <span class="tenant-badge">${typeText}</span>
            <span style="font-size:0.76rem;color:rgba(148,163,184,0.95);">${dateText}</span>
          </div>
          <div style="margin-bottom:2px;">
            ${contentText}
          </div>
          <div style="font-size:0.76rem;color:rgba(148,163,184,0.96);">
            Trạng thái: <strong>${statusText}</strong>
          </div>
        `;
        list.appendChild(div);
      });
    }

    async function loadTenantDashboard() {
      if (!CURRENT_TENANT || !CURRENT_TENANT.roomCode) return;
      const roomCode     = CURRENT_TENANT.roomCode;
      const billsStatus  = document.getElementById("tenantBillsStatus");
      const historyStatus= document.getElementById("tenantHistoryStatus");

      if (billsStatus)  billsStatus.textContent  = "Đang tải hóa đơn...";
      if (historyStatus)historyStatus.textContent= "Đang tải dữ liệu...";

      try {
        const res  = await fetch(
          API_URL + "?action=tenantDashboard&roomCode=" + encodeURIComponent(roomCode)
        );
        const data = await res.json();
        if (!data || !data.success) {
          if (billsStatus)  billsStatus.textContent  = "Không tải được dữ liệu hóa đơn.";
          if (historyStatus)historyStatus.textContent= "Không tải được lịch sử yêu cầu.";
          return;
        }
        renderTenantBills(data.invoices || []);
        renderTenantHistory(data.history || []);
      } catch (e) {
        console.error("loadTenantDashboard error:", e);
        if (billsStatus)  billsStatus.textContent  = "Lỗi kết nối khi tải hóa đơn.";
        if (historyStatus)historyStatus.textContent= "Lỗi kết nối khi tải lịch sử yêu cầu.";
      }
    }

    async function handleMaintenanceSubmit(event) {
      event.preventDefault();
      if (!CURRENT_TENANT || !CURRENT_TENANT.roomCode) {
        alert("Vui lòng đăng nhập tài khoản phòng trước khi báo hỏng.");
        return;
      }

      const category = document.getElementById("maintenanceCategory").value.trim();
      const desc     = document.getElementById("maintenanceDesc").value.trim();
      const time     = document.getElementById("maintenanceTime").value.trim();
      const statusEl = document.getElementById("maintenanceStatus");

      if (statusEl) statusEl.textContent = "Đang gửi yêu cầu...";

      try {
        const body = new URLSearchParams({
          action: "tenantMaintenance",
          roomCode: CURRENT_TENANT.roomCode,
          category,
          description: desc,
          preferredTime: time
        });

        const res  = await fetch(API_URL, {
          method: "POST",
          headers: { "Content-Type": "application/x-www-form-urlencoded;charset=UTF-8" },
          body
        });
        const data = await res.json();
        if (!data || !data.success) {
          if (statusEl) statusEl.textContent =
            (data && data.message) || "Không gửi được yêu cầu. Vui lòng thử lại.";
          return;
        }

        if (statusEl) statusEl.textContent = "Đã gửi yêu cầu sửa chữa. Cảm ơn bạn.";
        document.getElementById("maintenanceForm").reset();
        loadTenantDashboard();
      } catch (e) {
        console.error("handleMaintenanceSubmit error:", e);
        if (statusEl) statusEl.textContent = "Có lỗi khi gửi yêu cầu. Vui lòng thử lại.";
      }
    }

    async function handleTempStaySubmit(event) {
      event.preventDefault();
      if (!CURRENT_TENANT || !CURRENT_TENANT.roomCode) {
        alert("Vui lòng đăng nhập tài khoản phòng trước khi đăng ký tạm trú.");
        return;
      }

      const guestName = document.getElementById("tempGuestName").value.trim();
      const guestId   = document.getElementById("tempGuestId").value.trim();
      const stayFrom  = document.getElementById("tempStayFrom").value.trim();
      const note      = document.getElementById("tempStayNote").value.trim();
      const statusEl  = document.getElementById("tempStayStatus");

      if (statusEl) statusEl.textContent = "Đang gửi đăng ký...";

      try {
        const body = new URLSearchParams({
          action: "tenantTempStay",
          roomCode: CURRENT_TENANT.roomCode,
          guestName,
          guestId,
          stayTime: stayFrom,
          note
        });

        const res  = await fetch(API_URL, {
          method: "POST",
          headers: { "Content-Type": "application/x-www-form-urlencoded;charset=UTF-8" },
          body
        });
        const data = await res.json();
        if (!data || !data.success) {
          if (statusEl) statusEl.textContent =
            (data && data.message) || "Không gửi được đăng ký. Vui lòng thử lại.";
          return;
        }

        if (statusEl) statusEl.textContent = "Đã gửi đăng ký tạm trú. Cảm ơn bạn.";
        document.getElementById("tempStayForm").reset();
        loadTenantDashboard();
      } catch (e) {
        console.error("handleTempStaySubmit error:", e);
        if (statusEl) statusEl.textContent = "Có lỗi khi gửi đăng ký. Vui lòng thử lại.";
      }
    }

    document.addEventListener("DOMContentLoaded", () => {
      loadTenantFromStorage();
      initTenantTabs();
      updateTenantUI();

      const loginForm = document.getElementById("tenantLoginForm");
      if (loginForm) loginForm.addEventListener("submit", handleTenantLogin);

      const mForm = document.getElementById("maintenanceForm");
      if (mForm) mForm.addEventListener("submit", handleMaintenanceSubmit);

      const tForm = document.getElementById("tempStayForm");
      if (tForm) tForm.addEventListener("submit", handleTempStaySubmit);
    });
  </script>
</body>
</html>
